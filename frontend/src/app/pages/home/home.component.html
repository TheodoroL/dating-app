<div class="home-root">
    <!-- Header -->
    <header class="header">
        <h2 class="header-title">Descubra</h2>
        <div class="header-icons">
            <button class="icon-button">
                <span class="icon">🔍</span>
            </button>
            <button class="icon-button">
                <span class="icon">🔔</span>
            </button>
            <button class="icon-button">
                <span class="icon">⚙️</span>
            </button>
        </div>
    </header>

    <!-- Add Story Button -->
    <!-- <div class="story-add">
        <button class="add-story-btn">
            <span class="plus-icon">+</span>
            Adicionar História
        </button>
    </div> -->

    <!-- Profile Card -->
    <div class="profile-card" *ngIf="currentProfile; else noUsers">
        <button class="lock-icon">
            <span>🔒</span>
        </button>

        <div class="card-content"
            [style.backgroundImage]="hasProfilePhoto() ? 'url(' + getProfilePhoto() + ')' : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'"
            [class.no-photo]="!hasProfilePhoto()">
            <div class="profile-info">
                <div class="user-info">
                    <div class="user-avatar" *ngIf="!hasProfilePhoto()">
                        <span class="initials">{{ currentProfile.firstname[0] }}{{ currentProfile.lastname[0] }}</span>
                    </div>
                    <h3 class="user-name">{{ currentProfile.firstname }} {{ currentProfile.lastname }}, {{
                        currentProfile.age }}</h3>
                    <p class="user-details">
                        <span class="gender-badge">{{ getGenderIcon() }}</span>
                        {{ currentProfile.gender }}
                    </p>
                </div>
            </div>

            <!-- Pagination dots -->
            <div class="pagination-dots" *ngIf="currentProfile.photos && currentProfile.photos.length > 1">
                <span class="dot" *ngFor="let photo of currentProfile.photos; let i = index"
                    [class.active]="i === currentPhotoIndex" (click)="changePhoto(i)">
                </span>
            </div>
        </div>

        <button class="chat-icon">
            <span>💬</span>
        </button>
    </div>

    <ng-template #noUsers>
        <div class="no-users-card">
            <div class="empty-state">
                <span class="empty-icon">😔</span>
                <h3>Nenhum perfil disponível</h3>
                <p>Volte mais tarde para ver novos perfis!</p>
                <button class="reload-btn" (click)="loadUsers()">Recarregar</button>
            </div>
        </div>
    </ng-template>

    <!-- Action Buttons -->
    <div class="action-buttons">
        <button class="action-btn rewind" [disabled]="currentIndex === 0" (click)="previousProfile()">
            <span class="icon">↶</span>
        </button>
        <button class="action-btn dislike" [disabled]="!currentProfile || isLoading" (click)="onDislike()">
            <span class="icon">✕</span>
        </button>
        <button class="action-btn like" [disabled]="!currentProfile || isLoading" (click)="onLike()">
            <span class="icon">❤️</span>
        </button>
    </div>

    <!-- Loading Indicator -->
    <div class="loading-indicator" *ngIf="isLoading">
        <div class="spinner"></div>
        <p>Carregando perfis...</p>
    </div>

    <!-- Bottom Navigation -->
    <app-bottom-nav [activeItem]="'home'"></app-bottom-nav>

    <!-- Match Modal -->
    <app-match-modal [isVisible]="showMatchModal" [userName]="matchedUserName" (closed)="onModalClosed()">
    </app-match-modal>
</div>